# CodeMind Database Configuration
# Persistent database credentials and settings

# PostgreSQL Database Settings
DB_NAME=codemind
DB_USER=codemind
DB_PASSWORD=codemind123
DB_HOST=codemind-db
DB_PORT=5432

# Database Connection Pool Settings
DB_MIN_POOL_SIZE=2
DB_MAX_POOL_SIZE=10
DB_CONNECTION_TIMEOUT_MS=5000
DB_IDLE_TIMEOUT_MS=300000

# Database Backup Settings
DB_BACKUP_ENABLED=true
DB_BACKUP_RETENTION_DAYS=30
DB_BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
DB_BACKUP_PATH=./backups

# SSL Settings (for production)
DB_SSL_MODE=prefer
DB_SSL_CERT_PATH=
DB_SSL_KEY_PATH=
DB_SSL_CA_PATH=

# Advanced PostgreSQL Settings
POSTGRES_SHARED_BUFFERS=256MB
POSTGRES_EFFECTIVE_CACHE_SIZE=1GB
POSTGRES_MAINTENANCE_WORK_MEM=64MB
POSTGRES_CHECKPOINT_COMPLETION_TARGET=0.9
POSTGRES_WAL_BUFFERS=16MB
POSTGRES_DEFAULT_STATISTICS_TARGET=100

# External Tool System Database Settings
EXTERNAL_TOOLS_ENABLED=true
TOOL_RECOMMENDATIONS_ENABLED=true
TECH_STACK_DETECTION_ENABLED=true
TOOL_USAGE_ANALYTICS_ENABLED=true

# Migration Settings
AUTO_MIGRATE=true
MIGRATION_TIMEOUT_MS=30000
SCHEMA_VERSION_TABLE=schema_migrations

# Security Settings
DB_ENCRYPT_CONNECTION=false
DB_REQUIRE_SSL=false
DB_VERIFY_SERVER_CERT=false

# Performance Settings
DB_STATEMENT_TIMEOUT_MS=30000
DB_QUERY_TIMEOUT_MS=15000
DB_LOCK_TIMEOUT_MS=10000

# Monitoring Settings
DB_LOG_SLOW_QUERIES=true
DB_SLOW_QUERY_THRESHOLD_MS=1000
DB_LOG_CONNECTIONS=false
DB_LOG_DISCONNECTIONS=false

# CodeMind Integration
CODEMIND_DB_FEATURES=external_tools,recommendations,analytics,permissions
CODEMIND_DB_CACHE_TTL=300
CODEMIND_DB_BATCH_SIZE=100